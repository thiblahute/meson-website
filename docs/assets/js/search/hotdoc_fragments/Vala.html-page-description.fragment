fragment_downloaded_cb({"url": "Vala.html#page-description", "fragment": "<div id=\"page-description\" data-hotdoc-source=\"Vala.md\">\n<h1 id=\"compiling-vala-applications\">Compiling Vala applications</h1>\n<p>Meson has support for compiling Vala programs. A skeleton Vala file looks like this.</p>\n<pre><code class=\"language-meson\">project('valaprog', ['vala', 'c'])\n\nglib = dependency('glib-2.0')\ngobject = dependency('gobject-2.0')\n\nexecutable('valaprog', 'prog.vala',\n           dependencies : [glib, gobject])\n</code></pre>\n<p>You must always specify <code>glib</code> and <code>gobject</code> as dependencies, because all Vala applications use them.</p>\n<h2 id=\"using-a-custom-vapi\">Using a custom VAPI</h2>\n<p>When dealing with libraries that are not providing Vala bindings, you can point --vapidir to a directory relative to meson.current_source_dir containing the binding and include a --pkg flag.</p>\n<pre><code class=\"language-meson\">glib = dependency('glib-2.0')\ngobject = dependency('gobject-2.0')\nfoo = dependency('foo')\n\nexecutable('app',\n           dependencies: [glib, gobject, foo]\n           vala_args: ['--pkg=foo', '--vapidir=' + meson.current_source_dir()])\n</code></pre>\n<h2 id=\"gobject-introspection\">GObject Introspection</h2>\n<p>To generate GObject Introspection metadata, the --gir flags has to be set explicitly in vala_args.</p>\n<pre><code class=\"language-meson\">foo_lib = library('foo',\n                  dependencies: [glib, gobject],\n                  vala_args: ['--gir=Foo-1.0.gir'])\n</code></pre>\n<p>For the typelib, use a custom_target depending on the library:</p>\n<pre><code class=\"language-meson\">    g_ir_compiler = find_program('g_ir_compiler')\n    custom_target('foo-typelib',\n                   command: [g_ir_compiler, '--output', '@OUTPUT@', meson.current_build_dir() + '/foo@sha/Foo-1.0.gir'],\n                   output: 'Foo-1.0.typelib',\n                   depends: foo_lib,\n                   install: true,\n                   install_dir: get_option('libdir') + '/girepository-1.0')\n</code></pre>\n<h2 id=\"installing-vapi-and-gir-files\">Installing VAPI and GIR files</h2>\n<p>To install generated VAPI and GIR files, it is necessary to add a custom install script.</p>\n<pre><code class=\"language-meson\">meson.add_install_script('install.sh')\n</code></pre>\n<pre><code class=\"language-bash\">#!/bin/sh\n\nmkdir -p \"${DESTDIR}${MESON_INSTALL_PREFIX}/share/vala/vapi\"\nmkdir -p \"${DESTDIR}${MESON_INSTALL_PREFIX}/share/gir-1.0\"\n\ninstall -m 0644                                         \\\n    \"${MESON_BUILD_ROOT}/foo-1.0.vapi\" \\\n    $\"{DESTDIR}${MESON_INSTALL_PREFIX}/share/vala/vapi\"\n\ninstall -m 0644                            \\\n    \"${MESON_BUILD_ROOT}/foo@sha/Foo-1.0.gir\" \\\n    \"${DESTDIR}${MESON_INSTALL_PREFIX}/share/gir-1.0\"\n</code></pre>\n\n</div>\n\n\n        "});